# Helium DEtector
A model of gamma-ray interference in a $^3$He neutron detector in high count-rate environments
README
Authors:
Aron Johanson & Wilhelm Thunberg

The following document describes how to use the code written for project 16
of the applied physics course.

The code is structured as a set of files each containing a necessary function.
"detector.py" contains a class object for the detector.

## Files
### /main:

**main.py** : Run simulation and specify input data. Returns result files in */results* 


**chargeTrack.py** :  Function that models the ionisation of the gas along a photoelectron's path inside the volume.
    The path is divided into a number of segments and the electrons created in each segment is summed into
    a single charge. The modelled charge is placed in the middle of the segment and its pulse response 
    is calculated using the function pulse 
    
**detector.py**: Class that where relevant detector parameters are defined.

**driftVel.py** : Function the calculates drift velocity of electron or ion based on E-field and mobility.

**field.py** : Function that calculates electric field at a specific position in cylindrical geometry.

**inducedCurrent.py** :     Function that calculates induced current from free moving chrge in E-field using shockley-ramo theorem.

**multFactor.py**: Function that calculates the multiplication factor of a detector. Presets of dV and K taken from Knoll.

**numDens.py** :   Function that returns the number density inside the detector.

**processResults.py** : 

**runTracks.py** : Function that runs *chargeTrack.py* for each given line in the input data file.

**pulse.py** :   Function that returns array containing signal (pulse) values generated by one charge.


/main/bolsig

**Bolsig_python.py** : Runs bolsigminus to calculate the electron mobility at different radial segments in the detector.

**bolsigminus** : http://www.bolsig.laplace.univ-tlse.fr/

**SigloDataBase-LXCat-04Jun2013.txt**: http://www.bolsig.laplace.univ-tlse.fr/

**LXCat-June2013**: http://www.bolsig.laplace.univ-tlse.fr/

### /main/data (used for input)
**Count_rates.csv**: Cont_rate data generated in MCNP by Markus Preston

**Gamma_3months_tracks.csv**: Gamma radiation after 3 months cooling, data generated in MCNP by Markus Preston

**Gamma_5yr_tracks**:  Gamma radiation after 5 years cooling, data generated in MCNP by Markus Preston

**SF_3months_tracks.csv**:  Spontaneous Fission after 3 months cooling, data generated in MCNP by Markus Preston

**SF_5yr_tracks.csv**:  Spontaneous Fission after 5 years cooling, data generated in MCNP by Markus Preston

### /main/results/

**peak_finder.py** : Used to find peaks of registered pulses and generate pulse height spectrum based on result files.




## Run simulation
To run the simulation launch main.py
The main file is a script. Input data and detector parameters etc. are defined inside the code.
In the script, the input data is gathered from the directory *data* along with a **track-fraction** for how many percent of the rows in the input data should be used.
**det_of_interest** defines which detectors to simulate. For example det_of_interest=range(1,18)
or det_of_interest=[4,7,9].
The characteristics of the detector is also provided here. All units are in *SI units*.

**main.py** calls upon **runTracks.py** that reads the input files and launches **chargeTrail.py**
which in turn calculates the ionisation along a track (a single line in the input data file) and divides it into segements.
For each segment, **pulse.py** is called upon to calculate the induced current and voltage.
**pulse.py** solves a differential equation using the Euler backwards method.

The results from main are saved under the directory **main/results/** as .csv files. The file names indicate
what data they contain. 

Using **peakFinder.py** and **plotResults.py** the results can be visualized.

## Important parameters

- *specify input data* - > **main.py**

- *detector parameters* (Geometry, Resistance, Capacitance and Voltage) - > **main.py**

- *tau* -> USer can change tau in **main.py**

- *num_seg* -> **chargeTrail.py** (Calculated by dividing total energy deposited along track with 40KeV
which gives roughly 240 ions per segment. Maximum num_seg is 10, if track is relatively long (0.1*L_det) the minium is 3.)

- *dr* -> pulse.py (The legnth of the segments that the detector radius is divided into.
dr governs the time step according to dt=dr/v and is decreases close to the anode.)

- radiation detection rate -> **runTracks.py** from **data/Count_rates.csv**

Multiplication factor -> **detector.py**

t_global (for gamma and neutron) -> **main.py** 





